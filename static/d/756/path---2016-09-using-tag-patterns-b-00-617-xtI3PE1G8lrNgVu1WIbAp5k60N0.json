{"data":{"wordpressPost":{"title":"Hacking HXL: using tag patterns","content":"<section id=\"overview\">\n<h2>Quick overview</h2>\n<p><strong>Tag patterns</strong> let you choose columns in a HXL dataset based on the base <a href=\"http://hxl2.local/standard/dictionary/\">hashtag</a> and a list of attributes that <em>must</em> or <em>must not</em> be present. They are not an official part of the HXL standard, but several toolsets support them, including the <a href=\"https://proxy.hxlstandard.org\">HXL Proxy</a>, the <a href=\"https://github.com/HXLStandard/libhxl-python\">Python HXL library</a>, and the <a href=\"https://github.com/HXLStandard/libhxl-js\">Javascript HXL library</a>.  Here is an example (whitespace is optional):</p>\n<blockquote><p>#country +code -origin</p></blockquote>\n<p>A tag pattern looks like a regular HXL hashtag specification, with two exceptions:</p>\n<ol>\n<li>The leading hash sign is optional (it can be awkward on command lines and in URL parameters).</li>\n<li>Attribute names can begin with a &#8220;-&#8221; as well as a &#8220;+&#8221;.</li>\n</ol>\n<p>The above example, <i>#country</i> is the base hashtag, and the other two elements are patterns: <i>+code</i> means that the <i>code</i> attribute must be present, and <i>-origin</i> means that the <i>origin</i> attribute must <em>not</em> be present.</p>\n</section>\n<section id=\"indepth\">\n<h2>Deep dive</h2>\n<p>HXL is designed to be flexible, and to retrofit onto datasets that people already have. As a result, data consumers should always be ready to accept (and ignore) hashtags or attributes that they don&#8217;t recognise. </p>\n<p>When you use a HXL tag pattern, you don&#8217;t have to be able to anticipate every possible attribute that a data provider might use, or the order in which the data provider will use them.  You simply specify what has to be present and what has to be absent, and assume that the rest (if any) don&#8217;t matter.</p>\n<section id=\"examples\">\n<h3>Examples</h3>\n<p>Here are some examples of patterns and what they match:</p>\n<table>\n<thead>\n<tr>\n<th>Tag pattern</th>\n<th>Matches</th>\n<th>Non-matches</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>sector</td>\n<td>#sector<br />\n#sector+code<br />\n#sector+name+fr</td>\n<td>#adm1+code<br />\n#inneed<br />\n#geo+lat</td>\n</tr>\n<tr>\n<td>#country +code -origin</td>\n<td>#country+code<br />\n#country+code+dest<br />\n#country+dest+code<br />\n#country+iso3+code</td>\n<td>#country<br />\n#country+origin+code<br />\n#country+origin<br />\n#country+code+iso3+origin</td>\n</tr>\n<tr>\n<td>#population+f</td>\n<td>#population+f<br />\n#population+elderly+f+adults</td>\n<td>#population<br />\n#population+m</td>\n</tr>\n<tr>\n<td>affected-m</td>\n<td>#affected<br />\n#affected+children<br />\n#affected+f+infants+age_0_2</td>\n<td>#affected+m<br />\n#affected+children+m+age_5_12<br />\n#affected+m+f<br />\n</tr>\n</tbody>\n</table>\n</section>\n<section id=\"coding\">\n<h3>For coders</h3>\n<p>In a filter in Python:</p>\n<pre>import hxl\r\n\r\ndata = hxl.data(\"http://ourairports.com/countries/GN/airports.hxl\")\r\nfiltered = data.without_columns('loc+airport+code-local')</pre>\n<p>Listing matching columns in Python:</p>\n<pre>import hxl\r\n\r\ndata = hxl.data(\"http://ourairports.com/countries/GN/airports.hxl\")\r\npattern = hxl.model.TagPattern.parse(\"loc+airport+code-local\")\r\nfor column in data.columns:\r\n    if pattern.match(column):\r\n        print(column)</pre>\n<p>In a filter in Javascript:</p>\n<pre>\r\nhxl.load(\"http://ourairports.com/countries/GN/airports.html\", function(dataset) {\r\n    var filtered = \r\n      dataset.without_columns(\"loc+airport+code-local\");\r\n    console.log(filtered_data);\r\n});</pre>\n<p>Listing matching columns in Javascript:</p>\n<pre>\r\nhxl.load(\"http://ourairports.com/countries/GN/airports.html\", function(dataset) {\r\n    var pattern = hxl.classes.Pattern.parse(\"loc+airport+code-local\");\r\n    dataset.columns.map(function (col) {\r\n        console.log(col);\r\n    });\r\n});</pre>\n</section>\n</section>\n"}},"pageContext":{"id":"62e21d32-4fb7-53b1-b916-820aa37fc025"}}